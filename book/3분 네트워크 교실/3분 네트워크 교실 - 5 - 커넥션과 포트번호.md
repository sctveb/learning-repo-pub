# 3분 네트워크 교실 - 5 - 커넥션과 포트번호

### 4계층의 역할과 개요

- 신뢰성이 높은 전송을 수행
- 확인응답, 흐름제어를 수행
- 어느 애플리케이션에 도달할지를 판별하기 위해 포트번호 사용
- TCP 또는 UDP 두 가지 프로토콜 중 하나 사용



### 커넥션과 세그먼트

커넥션 : 애플리케이션 간의 송수신을 하는 데이터의 길

쓰리웨이 핸드쉐이크 : 통신 요청, 요청받은 쪽에서 통신 허가, 요청한 쪽에서 준비 완료 신호

하나의 데이터 => 복수의 세그먼트(MSS) => 각각의 세그먼트에 번호 부여(시퀀스 번호)



### 윈도우 제어

- 확인응답을 보낼 떄는 확인응답 번호에 다음에 수신 받을 데이터의 번호를 삽입
- 전송에러가 발생시 지금 보낸 것과 같은 데이터를 보냄
- TCP는 윈도우 제어라는 구조로 버퍼 플로를 방지
- 상대방 버퍼사이즈 = 윈도우 사이즈를 확인하면서 송수신 진행
- 윈도우 사이즈 분량까지는 확인응답을 수신하지 않아도 한번에 수신 가능

웰 노운 포트 : 1~1023



### UDP

TCP의 단점 

1. 확인응답을 기다리는 시간이 필요
2. 브로드케스트를 사용할 수 없음

TCP의 반대 = UDP = 고속 but 확실하지 않음



### 네트워크 주소 변환

NAT, 주소가 부족하기 때문에 네트워크 주소 변환을 활용

단점 : 보유하는 글로벌 IP 주소 수 이상의 호스트는 인터넷에 동시에 접속 불가

NAT에서 변환되는 주소는 유일해야 함



### NAPT

하나의 글로벌 IP 주소로 복수의 컴퓨터를 접속 가능, 포트 번호마다 변환

단점 :

1. LAN 내부에서 외부로 공개하고 싶은 서버가 있을 경우 => 정적 NAPT
2. FTP 사용 불가



### 5~7계층

5계층 : 세션관리

6계층 : 데이터의 변환, 압축, 암호화

7계층 : 사용자 애플리케이션에 네트워크 서비스를 제공



### OSI 참조 모델과 요약

- 각 계층은 상위 계층에 서비스를 제공
- 각 계층은 독립해 있음, 다른 계층에 영향을 미치지 않음

